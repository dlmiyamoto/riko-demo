<dom-module is="instagram-gallery">
    <style>
        :host {
            display: block;
            height: 100%;
            padding-bottom: 100px;
        }
    </style>
    <template>
        <div id="instagram"></div>
        <iron-scroll-threshold scroll-target="html" on-lower-threshold="loadNext">

        </iron-scroll-threshold>
    </template>
</dom-module>
<script>
    Polymer({
        is: "instagram-gallery",
        ready: function() {
            this.scrollTarget = document.querySelector('html')
        },
        attached: function() {
            var ironScroll = this.$$('iron-scroll-threshold')
            this.userFeed = new Instafeed({
                get: "user",
                userId: '253291627',
                accessToken: '253291627.1677ed0.45b8d7466847441b9a798f77585995e8',
                target: 'instagram',
                resolution: 'thumbnail',
            })
            this.userFeed.run()
        },
        loadNext: function() {
            console.log(this.userFeed.hasNext())
            console.log("BEEP")
            if (this.userFeed.hasNext()) {
                this.userFeed.next()
            }
            this.$$('iron-scroll-threshold').clearTriggers()
        }

    })
</script>
