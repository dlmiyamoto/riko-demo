<html>

<head>
    {% include head.html %}
    <title>{{site.maintitle}}</title>
    <style is="custom-style">
        app-header {
            height: 60vh;
            background-position: center center;
            background-size: cover;
            background-origin: content-box;
            background-image: url("{{site.baseurl}}/images/piano.jpg");
            background-repeat: no-repeat;
            --app-header-background-front-layer: {
                background: -webkit-linear-gradient(top, transparent 0%, transparent 50%, rgba(0, 0, 0, 0.5) 100%);
            }
            ;
            --app-header-background-rear-layer: {
                background-color: var(--primary-color);
            }
            ;
        }
        app-drawer {
          margin-top: 64px;
        }
        [main-title] {
            @apply(--landing-main-title);
        }
    </style>
</head>

<body fullbleed unresolved>
  <template id="bind" is="dom-bind">
    <app-drawer-layout force-narrow>
        <app-drawer align="end">
            {% include drawer.html %}
        </app-drawer>
        <app-header-layout>
            <app-header threshold="200" condenses fixed effects="waterfall resize-snapped-title fade-background" effects-config='{"resize-snapped-title": {"startsAt": 0.8, "duration": "10ms"}, "fade-background": {"startsAt": 0.8, "endsAt": 0.9}}'>
                <app-toolbar>
                    {% include logo.html %}
                    <div condensed-title>{{site.title}}</div>
                    {% include toolbar.html %}
                </app-toolbar>
                <h1 main-title>{{site.maintitle}}</h1>
            </app-header>
            <iron-scroll-threshold id="bottom-threshold" lower-threshold="400">
            <div id="social">
                {% for soc in site.data.social %}
                <a href="{{soc.href}}">
                    <iron-icon icon="soc:{{soc.name}}"></iron-icon>
                </a>
                {% endfor %}
            </div>
              <div class="content flex-wrap">
                {{content}}
              </div>
            </iron-scroll-threshold>
            {% include footer.html %}
        </app-header-layout>
    </app-drawer-layout>

    <script>
        var scrollThreshold = document.querySelector("#bottom-threshold"),
            social = document.querySelector('#social');
        scrollThreshold.scrollTarget = document.querySelector('html');
        scrollThreshold.addEventListener('lower-threshold', function(e) {
            console.log("lower")
            if(scrollThreshold.lowerTriggered){
              scrollThreshold.clearTriggers()
            }
        })
        scrollThreshold.addEventListener('upper-threshold', function(e) {
            console.log("higher")
            scrollThreshold.clearTriggers()
        })
        document.querySelector('app-header').addEventListener('threshold-triggered-changed', function(e) {
            social.style.display = e.detail.value ? "block": "none";
        })
    </script>
  </template>
  <script>

  </script>
</body>

</html>
